<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <title>ユーザー 作成/編集フォーム</title>
</head>

<body>
    <h1 th:if="${user.id == null}">新規ユーザーを追加</h1>
    <h1 th:if="${user.id != null}">ユーザー情報を編集</h1>

    <form th:object="${user}" method="post" 
          th:action="${user.id == null ? '/admin/users/add' : '/admin/users/edit/' + user.id}">
        
        <div class="form-group">
            <label for="username">ユーザー名 <span style="color: red;">*</span></label>
            <input type="text" id="username" th:field="*{username}" required />
            <p th:if="${#fields.hasErrors('username')}" th:errors="*{username}" class="error"></p>
        </div>

        <div class="form-group">
            <label for="password">パスワード <span style="color: red;">*</span></label>
            <input type="password" id="password" th:field="*{password}" />
            <p class="note" th:if="${user.id != null}">（変更する場合のみ入力してください）</p>
            <p th:if="${#fields.hasErrors('password')}" th:errors="*{password}" class="error"></p>
        </div>

        <div class="form-group">
            <label for="role">ロール <span style="color: red;">*</span></label>
            <select id="role" th:field="*{role}" required>
                <option value="">選択してください</option>
                <option value="ROLE_ADMIN">管理者（ROLE_ADMIN）</option>
                <option value="ROLE_USER">一般ユーザー（ROLE_USER）</option>
            </select>
            <p th:if="${#fields.hasErrors('role')}" th:errors="*{role}" class="error"></p>
        </div>

        <div class="form-group">
            <button type="submit" th:text="${user.id == null ? '登録' : '更新'}"></button>
            <a th:href="@{/admin/users}">キャンセル</a>
        </div>

    </form>

</body>

</html>
